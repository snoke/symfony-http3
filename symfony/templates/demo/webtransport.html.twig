{% extends 'base.html.twig' %}

{% block title %}WebTransport Demo{% endblock %}

{% block body %}
  <h1>WebTransport Demo</h1>

  <p>
    Target: <code id="target-url">{{ wt_url }}</code>
    {% if cert_digest_hex %}
      <br>
      Cert (sha-256): <code>{{ cert_digest_hex }}</code>
    {% endif %}
  </p>

  <div style="display:flex; gap: 0.75rem; align-items:center; flex-wrap: wrap; margin: 1rem 0;">
    <button id="connect">Connect</button>
    <button id="send" disabled>Send Datagram</button>
  </div>

  <div style="display:flex; gap: 0.75rem; align-items:center; flex-wrap: wrap; margin: 1rem 0;">
    <input id="payload" type="text" value="hello from browser" style="min-width: 320px;">
  </div>

  <h2>Log</h2>
  <pre id="log" style="background:#0b1020;color:#d7e2ff;padding:1rem;border-radius:10px;overflow:auto;min-height:220px; width:min(900px, 100%);"></pre>

  <div
    id="wt-config"
    data-wt-url="{{ wt_url }}"
    data-cert-digest-bytes='{{ cert_digest_bytes|json_encode|raw }}'
  ></div>

  <script src="/demo/demo.js"></script>
{% endblock %}
